---
import Prose from "./Prose.astro";
import Section from "./Section.astro";
---

<Section id="events">
    <Prose>
        <h2>Events</h2>
        <p>
            Check our Google calendar for the most up-to-date information about
            upcoming events.
        </p>
    </Prose>
    <!-- Embed our Google Calendar -->
    <iframe
        id="gcal-iframe"
        src="https://calendar.google.com/calendar/embed?src=ab5594c927f49b0fdbac6df5105baab13fa8c85a557455199d4ffe8a1e3d2727%40group.calendar.google.com&ctz=America%2FLos_Angeles"
        style="border: 0"
        width="800"
        height="600"
        frameborder="0"
        scrolling="no"
        title="Syzygy Calendar"></iframe>

    <script type="text/javascript">
        /* Make sure the google calendar is always an appropriate size no matter what the screen size is */
        setTimeout(() => {
            setGCalWidth();
        }, 500);

        let timeoutId = null;
        window.addEventListener("resize", () => {
            clearTimeout(timeoutId);
            timeoutId = setTimeout(() => {
                setGCalWidth();
            }, 500);
        });

        function setGCalWidth() {
            const iframe = document.getElementById("gcal-iframe");
            const parentWidth = iframe.parentElement.clientWidth;
            iframe.style.width = `${parentWidth}px`;
            iframe.style.height = `${parentWidth * 0.75}px`;
        }
    </script>
</Section>
